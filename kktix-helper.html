
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KKTIX æ¶ç¥¨è¼”åŠ©å·¥å…·</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    button { padding: 10px 20px; font-size: 16px; margin: 10px 0; }
    #log { white-space: pre-wrap; font-size: 14px; background: #f0f0f0; padding: 10px; border: 1px solid #ccc; height: 200px; overflow-y: scroll; }
  </style>
</head>
<body>
  <h1>KKTIX æ¶ç¥¨è¼”åŠ©å·¥å…·</h1>
  <p>è«‹åœ¨é–‹ç¥¨å‰æ‰“é–‹æ­¤å·¥å…·é ä¸¦åœç•™åœ¨ç¥¨åˆ¸é é¢</p>
  <label><input type="checkbox" id="autoNext" checked> è‡ªå‹•æŒ‰ã€Œä¸‹ä¸€æ­¥ã€</label><br>
  <label><input type="checkbox" id="safeMode" checked> é–‹å•Ÿå®‰å…¨æ¨¡å¼ï¼ˆæ¸›å°‘è‡ªå‹•è¡Œç‚ºï¼‰</label><br>
  <button onclick="startHelper()">å•Ÿå‹•è¼”åŠ©å·¥å…·</button>

  <div id="log"></div>

  <script>
    function log(msg) {
      document.getElementById("log").textContent += msg + "\n";
    }

    function startHelper() {
      log("ğŸš€ å·¥å…·å•Ÿå‹•ä¸­...");
      const safe = document.getElementById("safeMode").checked;
      const autoNext = document.getElementById("autoNext").checked;

      const interval = setInterval(() => {
        try {
          // ç§»é™¤å»£å‘Šèˆ‡å·²å”®å®Œ
          document.querySelectorAll('.ticket.unavailable, .event-description, .promotion, .soldout, .kktix_ad').forEach(e => e.remove());
          log("ğŸ§¹ å·²æ¸…é™¤å·²å”®å®Œèˆ‡å»£å‘Šå€å¡Š");

          // è‡ªå‹•é¸ç¥¨æ•¸
          document.querySelectorAll("select.ticket-quantity-select").forEach(sel => {
            if (sel.value === "0") sel.value = "2";
          });

          // å‹¾é¸åŒæ„æ¢æ¬¾
          const checkbox = document.querySelector("#person_agree_term");
          if (checkbox && !checkbox.checked) checkbox.click();

          // è‡ªå‹•æŒ‰ä¸‹ä¸€æ­¥
          if (autoNext && !safe) {
            const btn = document.querySelector(".register.btn, .btn-next-step");
            if (btn) {
              btn.click();
              log("âœ… å·²è‡ªå‹•é»æ“Šä¸‹ä¸€æ­¥");
              clearInterval(interval);
            }
          }
        } catch (e) {
          log("âš ï¸ éŒ¯èª¤: " + e.message);
        }
      }, 3000);
    }
  </script>
</body>
</html>
